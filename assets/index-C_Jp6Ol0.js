var ae=Object.defineProperty;var oe=(e,t,n)=>t in e?ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var B=(e,t,n)=>(oe(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var qt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Qt;(function(e){(function(t){var n=typeof globalThis=="object"?globalThis:typeof qt=="object"?qt:typeof self=="object"?self:typeof this=="object"?this:l(),r=i(e);typeof n.Reflect<"u"&&(r=i(n.Reflect,r)),t(r,n),typeof n.Reflect>"u"&&(n.Reflect=e);function i(v,o){return function(d,b){Object.defineProperty(v,d,{configurable:!0,writable:!0,value:b}),o&&o(d,b)}}function a(){try{return Function("return this;")()}catch{}}function u(){try{return(0,eval)("(function() { return this; })()")}catch{}}function l(){return a()||u()}})(function(t,n){var r=Object.prototype.hasOwnProperty,i=typeof Symbol=="function",a=i&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",u=i&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",l=typeof Object.create=="function",v={__proto__:[]}instanceof Array,o=!l&&!v,d={create:l?function(){return Tt(Object.create(null))}:v?function(){return Tt({__proto__:null})}:function(){return Tt({})},has:o?function(s,c){return r.call(s,c)}:function(s,c){return c in s},get:o?function(s,c){return r.call(s,c)?s[c]:void 0}:function(s,c){return s[c]}},b=Object.getPrototypeOf(Function),T=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:te(),x=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:ne(),k=typeof WeakMap=="function"?WeakMap:ee(),j=i?Symbol.for("@reflect-metadata:registry"):void 0,$=qn(),st=Qn($);function xn(s,c,f,h){if(m(f)){if(!Ut(s))throw new TypeError;if(!Ht(c))throw new TypeError;return Un(s,c)}else{if(!Ut(s))throw new TypeError;if(!C(c))throw new TypeError;if(!C(h)&&!m(h)&&!J(h))throw new TypeError;return J(h)&&(h=void 0),f=L(f),Hn(s,c,f,h)}}t("decorate",xn);function Rn(s,c){function f(h,_){if(!C(h))throw new TypeError;if(!m(_)&&!Jn(_))throw new TypeError;Ft(s,c,h,_)}return f}t("metadata",Rn);function kn(s,c,f,h){if(!C(f))throw new TypeError;return m(h)||(h=L(h)),Ft(s,c,f,h)}t("defineMetadata",kn);function jn(s,c,f){if(!C(c))throw new TypeError;return m(f)||(f=L(f)),kt(s,c,f)}t("hasMetadata",jn);function Bn(s,c,f){if(!C(c))throw new TypeError;return m(f)||(f=L(f)),mt(s,c,f)}t("hasOwnMetadata",Bn);function Fn(s,c,f){if(!C(c))throw new TypeError;return m(f)||(f=L(f)),jt(s,c,f)}t("getMetadata",Fn);function Wn(s,c,f){if(!C(c))throw new TypeError;return m(f)||(f=L(f)),Bt(s,c,f)}t("getOwnMetadata",Wn);function Gn(s,c){if(!C(s))throw new TypeError;return m(c)||(c=L(c)),Wt(s,c)}t("getMetadataKeys",Gn);function Vn(s,c){if(!C(s))throw new TypeError;return m(c)||(c=L(c)),Gt(s,c)}t("getOwnMetadataKeys",Vn);function Ln(s,c,f){if(!C(c))throw new TypeError;if(m(f)||(f=L(f)),!C(c))throw new TypeError;m(f)||(f=L(f));var h=Q(c,f,!1);return m(h)?!1:h.OrdinaryDeleteMetadata(s,c,f)}t("deleteMetadata",Ln);function Un(s,c){for(var f=s.length-1;f>=0;--f){var h=s[f],_=h(c);if(!m(_)&&!J(_)){if(!Ht(_))throw new TypeError;c=_}}return c}function Hn(s,c,f,h){for(var _=s.length-1;_>=0;--_){var M=s[_],N=M(c,f,h);if(!m(N)&&!J(N)){if(!C(N))throw new TypeError;h=N}}return h}function kt(s,c,f){var h=mt(s,c,f);if(h)return!0;var _=St(c);return J(_)?!1:kt(s,_,f)}function mt(s,c,f){var h=Q(c,f,!1);return m(h)?!1:Lt(h.OrdinaryHasOwnMetadata(s,c,f))}function jt(s,c,f){var h=mt(s,c,f);if(h)return Bt(s,c,f);var _=St(c);if(!J(_))return jt(s,_,f)}function Bt(s,c,f){var h=Q(c,f,!1);if(!m(h))return h.OrdinaryGetOwnMetadata(s,c,f)}function Ft(s,c,f,h){var _=Q(f,h,!0);_.OrdinaryDefineOwnMetadata(s,c,f,h)}function Wt(s,c){var f=Gt(s,c),h=St(s);if(h===null)return f;var _=Wt(h,c);if(_.length<=0)return f;if(f.length<=0)return _;for(var M=new x,N=[],A=0,p=f;A<p.length;A++){var g=p[A],y=M.has(g);y||(M.add(g),N.push(g))}for(var w=0,S=_;w<S.length;w++){var g=S[w],y=M.has(g);y||(M.add(g),N.push(g))}return N}function Gt(s,c){var f=Q(s,c,!1);return f?f.OrdinaryOwnMetadataKeys(s,c):[]}function Vt(s){if(s===null)return 1;switch(typeof s){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return s===null?1:6;default:return 6}}function m(s){return s===void 0}function J(s){return s===null}function Yn(s){return typeof s=="symbol"}function C(s){return typeof s=="object"?s!==null:typeof s=="function"}function $n(s,c){switch(Vt(s)){case 0:return s;case 1:return s;case 2:return s;case 3:return s;case 4:return s;case 5:return s}var f=c===3?"string":c===5?"number":"default",h=Yt(s,a);if(h!==void 0){var _=h.call(s,f);if(C(_))throw new TypeError;return _}return Xn(s,f==="default"?"number":f)}function Xn(s,c){if(c==="string"){var f=s.toString;if(K(f)){var h=f.call(s);if(!C(h))return h}var _=s.valueOf;if(K(_)){var h=_.call(s);if(!C(h))return h}}else{var _=s.valueOf;if(K(_)){var h=_.call(s);if(!C(h))return h}var M=s.toString;if(K(M)){var h=M.call(s);if(!C(h))return h}}throw new TypeError}function Lt(s){return!!s}function zn(s){return""+s}function L(s){var c=$n(s,3);return Yn(c)?c:zn(c)}function Ut(s){return Array.isArray?Array.isArray(s):s instanceof Object?s instanceof Array:Object.prototype.toString.call(s)==="[object Array]"}function K(s){return typeof s=="function"}function Ht(s){return typeof s=="function"}function Jn(s){switch(Vt(s)){case 3:return!0;case 4:return!0;default:return!1}}function At(s,c){return s===c||s!==s&&c!==c}function Yt(s,c){var f=s[c];if(f!=null){if(!K(f))throw new TypeError;return f}}function $t(s){var c=Yt(s,u);if(!K(c))throw new TypeError;var f=c.call(s);if(!C(f))throw new TypeError;return f}function Xt(s){return s.value}function zt(s){var c=s.next();return c.done?!1:c}function Jt(s){var c=s.return;c&&c.call(s)}function St(s){var c=Object.getPrototypeOf(s);if(typeof s!="function"||s===b||c!==b)return c;var f=s.prototype,h=f&&Object.getPrototypeOf(f);if(h==null||h===Object.prototype)return c;var _=h.constructor;return typeof _!="function"||_===s?c:_}function Kn(){var s;!m(j)&&typeof n.Reflect<"u"&&!(j in n.Reflect)&&typeof n.Reflect.defineMetadata=="function"&&(s=Zn(n.Reflect));var c,f,h,_=new k,M={registerProvider:N,getProvider:p,setProvider:y};return M;function N(w){if(!Object.isExtensible(M))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case s===w:break;case m(c):c=w;break;case c===w:break;case m(f):f=w;break;case f===w:break;default:h===void 0&&(h=new x),h.add(w);break}}function A(w,S){if(!m(c)){if(c.isProviderFor(w,S))return c;if(!m(f)){if(f.isProviderFor(w,S))return c;if(!m(h))for(var I=$t(h);;){var O=zt(I);if(!O)return;var V=Xt(O);if(V.isProviderFor(w,S))return Jt(I),V}}}if(!m(s)&&s.isProviderFor(w,S))return s}function p(w,S){var I=_.get(w),O;return m(I)||(O=I.get(S)),m(O)&&(O=A(w,S),m(O)||(m(I)&&(I=new T,_.set(w,I)),I.set(S,O))),O}function g(w){if(m(w))throw new TypeError;return c===w||f===w||!m(h)&&h.has(w)}function y(w,S,I){if(!g(I))throw new Error("Metadata provider not registered.");var O=p(w,S);if(O!==I){if(!m(O))return!1;var V=_.get(w);m(V)&&(V=new T,_.set(w,V)),V.set(S,I)}return!0}}function qn(){var s;return!m(j)&&C(n.Reflect)&&Object.isExtensible(n.Reflect)&&(s=n.Reflect[j]),m(s)&&(s=Kn()),!m(j)&&C(n.Reflect)&&Object.isExtensible(n.Reflect)&&Object.defineProperty(n.Reflect,j,{enumerable:!1,configurable:!1,writable:!1,value:s}),s}function Qn(s){var c=new k,f={isProviderFor:function(g,y){var w=c.get(g);return m(w)?!1:w.has(y)},OrdinaryDefineOwnMetadata:N,OrdinaryHasOwnMetadata:_,OrdinaryGetOwnMetadata:M,OrdinaryOwnMetadataKeys:A,OrdinaryDeleteMetadata:p};return $.registerProvider(f),f;function h(g,y,w){var S=c.get(g),I=!1;if(m(S)){if(!w)return;S=new T,c.set(g,S),I=!0}var O=S.get(y);if(m(O)){if(!w)return;if(O=new T,S.set(y,O),!s.setProvider(g,y,f))throw S.delete(y),I&&c.delete(g),new Error("Wrong provider for target.")}return O}function _(g,y,w){var S=h(y,w,!1);return m(S)?!1:Lt(S.has(g))}function M(g,y,w){var S=h(y,w,!1);if(!m(S))return S.get(g)}function N(g,y,w,S){var I=h(w,S,!0);I.set(g,y)}function A(g,y){var w=[],S=h(g,y,!1);if(m(S))return w;for(var I=S.keys(),O=$t(I),V=0;;){var Kt=zt(O);if(!Kt)return w.length=V,w;var re=Xt(Kt);try{w[V]=re}catch(ie){try{Jt(O)}finally{throw ie}}V++}}function p(g,y,w){var S=h(y,w,!1);if(m(S)||!S.delete(g))return!1;if(S.size===0){var I=c.get(y);m(I)||(I.delete(w),I.size===0&&c.delete(I))}return!0}}function Zn(s){var c=s.defineMetadata,f=s.hasOwnMetadata,h=s.getOwnMetadata,_=s.getOwnMetadataKeys,M=s.deleteMetadata,N=new k,A={isProviderFor:function(p,g){var y=N.get(p);return m(y)?_(p,g).length?(m(y)&&(y=new x,N.set(p,y)),y.add(g),!0):!1:y.has(g)},OrdinaryDefineOwnMetadata:c,OrdinaryHasOwnMetadata:f,OrdinaryGetOwnMetadata:h,OrdinaryOwnMetadataKeys:_,OrdinaryDeleteMetadata:M};return A}function Q(s,c,f){var h=$.getProvider(s,c);if(!m(h))return h;if(f){if($.setProvider(s,c,st))return st;throw new Error("Illegal state.")}}function te(){var s={},c=[],f=function(){function A(p,g,y){this._index=0,this._keys=p,this._values=g,this._selector=y}return A.prototype["@@iterator"]=function(){return this},A.prototype[u]=function(){return this},A.prototype.next=function(){var p=this._index;if(p>=0&&p<this._keys.length){var g=this._selector(this._keys[p],this._values[p]);return p+1>=this._keys.length?(this._index=-1,this._keys=c,this._values=c):this._index++,{value:g,done:!1}}return{value:void 0,done:!0}},A.prototype.throw=function(p){throw this._index>=0&&(this._index=-1,this._keys=c,this._values=c),p},A.prototype.return=function(p){return this._index>=0&&(this._index=-1,this._keys=c,this._values=c),{value:p,done:!0}},A}(),h=function(){function A(){this._keys=[],this._values=[],this._cacheKey=s,this._cacheIndex=-2}return Object.defineProperty(A.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),A.prototype.has=function(p){return this._find(p,!1)>=0},A.prototype.get=function(p){var g=this._find(p,!1);return g>=0?this._values[g]:void 0},A.prototype.set=function(p,g){var y=this._find(p,!0);return this._values[y]=g,this},A.prototype.delete=function(p){var g=this._find(p,!1);if(g>=0){for(var y=this._keys.length,w=g+1;w<y;w++)this._keys[w-1]=this._keys[w],this._values[w-1]=this._values[w];return this._keys.length--,this._values.length--,At(p,this._cacheKey)&&(this._cacheKey=s,this._cacheIndex=-2),!0}return!1},A.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=s,this._cacheIndex=-2},A.prototype.keys=function(){return new f(this._keys,this._values,_)},A.prototype.values=function(){return new f(this._keys,this._values,M)},A.prototype.entries=function(){return new f(this._keys,this._values,N)},A.prototype["@@iterator"]=function(){return this.entries()},A.prototype[u]=function(){return this.entries()},A.prototype._find=function(p,g){if(!At(this._cacheKey,p)){this._cacheIndex=-1;for(var y=0;y<this._keys.length;y++)if(At(this._keys[y],p)){this._cacheIndex=y;break}}return this._cacheIndex<0&&g&&(this._cacheIndex=this._keys.length,this._keys.push(p),this._values.push(void 0)),this._cacheIndex},A}();return h;function _(A,p){return A}function M(A,p){return p}function N(A,p){return[A,p]}}function ne(){var s=function(){function c(){this._map=new T}return Object.defineProperty(c.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),c.prototype.has=function(f){return this._map.has(f)},c.prototype.add=function(f){return this._map.set(f,f),this},c.prototype.delete=function(f){return this._map.delete(f)},c.prototype.clear=function(){this._map.clear()},c.prototype.keys=function(){return this._map.keys()},c.prototype.values=function(){return this._map.keys()},c.prototype.entries=function(){return this._map.entries()},c.prototype["@@iterator"]=function(){return this.keys()},c.prototype[u]=function(){return this.keys()},c}();return s}function ee(){var s=16,c=d.create(),f=h();return function(){function p(){this._key=h()}return p.prototype.has=function(g){var y=_(g,!1);return y!==void 0?d.has(y,this._key):!1},p.prototype.get=function(g){var y=_(g,!1);return y!==void 0?d.get(y,this._key):void 0},p.prototype.set=function(g,y){var w=_(g,!0);return w[this._key]=y,this},p.prototype.delete=function(g){var y=_(g,!1);return y!==void 0?delete y[this._key]:!1},p.prototype.clear=function(){this._key=h()},p}();function h(){var p;do p="@@WeakMap@@"+A();while(d.has(c,p));return c[p]=!0,p}function _(p,g){if(!r.call(p,f)){if(!g)return;Object.defineProperty(p,f,{value:d.create()})}return p[f]}function M(p,g){for(var y=0;y<g;++y)p[y]=Math.random()*255|0;return p}function N(p){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(p)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(p)):M(new Uint8Array(p),p):M(new Array(p),p)}function A(){var p=N(s);p[6]=p[6]&79|64,p[8]=p[8]&191|128;for(var g="",y=0;y<s;++y){var w=p[y];(y===4||y===6||y===8)&&(g+="-"),w<16&&(g+="0"),g+=w.toString(16).toLowerCase()}return g}}function Tt(s){return s.__=void 0,delete s.__,s}})})(Qt||(Qt={}));var G="named",fn="name",Nt="unmanaged",ln="optional",gt="inject",et="multi_inject",dn="inversify:tagged",hn="inversify:tagged_props",Et="inversify:paramtypes",se="design:paramtypes",Zt="post_construct",Ct="pre_destroy";function ue(){return[gt,et,fn,Nt,G,ln]}var tn=ue(),D={Request:"Request",Singleton:"Singleton",Transient:"Transient"},E={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},at={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"},ce=0;function ot(){return ce++}var fe=function(){function e(t,n){this.id=ot(),this.activated=!1,this.serviceIdentifier=t,this.scope=n,this.type=E.Invalid,this.constraint=function(r){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.onDeactivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=t.scope===D.Singleton?this.activated:!1,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.onDeactivation=this.onDeactivation,t.cache=this.cache,t},e}(),le="Cannot apply @injectable decorator multiple times.",vn="Metadata key was used more than once in a parameter:",Z="NULL argument",nn="Key Not Found",de="Ambiguous match found for serviceIdentifier:",he="Could not unbind serviceIdentifier:",ve="No matching bindings found for serviceIdentifier:",pn="Missing required @injectable annotation in:",pe="Missing required @inject or @multiInject annotation in:",ye=function(e){return"@inject called with undefined this could mean that the class "+e+" has a circular dependency problem. You can use a LazyServiceIdentifier to  overcome this limitation."},ge="Circular dependency found:",we="Invalid binding type:",_e="No snapshot available to restore.",be="Invalid return type in middleware. Middleware must return!",me="Value provided to function binding must be a function!",Ae=function(e){return"You are attempting to construct '"+e+`' in a synchronous way
 but it has asynchronous dependencies.`},Se="The toSelf function can only be applied when a constructor is used as service identifier",yn="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",Te=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"The number of constructor arguments in the derived class "+(e[0]+" must be >= than the number of constructor arguments of its base class.")},Ie="Invalid Container constructor argument. Container options must be an object.",Ee='Invalid Container option. Default scope must be a string ("singleton" or "transient").',Ce="Invalid Container option. Auto bind injectable must be a boolean",Me="Invalid Container option. Skip base check must be a boolean",Oe="Attempting to unbind dependency with asynchronous destruction (@preDestroy or onDeactivation)",De=function(e,t){return"@postConstruct error in class "+e+": "+t},Ne=function(e,t){return"@preDestroy error in class "+e+": "+t},Mt=function(e,t){return"onDeactivation() error in class "+e+": "+t},Pe=function(e,t){return"It looks like there is a circular dependency in one of the '"+e+"' bindings. Please investigate bindings with "+("service identifier '"+t+"'.")},xe="Maximum call stack size exceeded",Re=function(){function e(){}return e.prototype.getConstructorMetadata=function(t){var n=Reflect.getMetadata(Et,t),r=Reflect.getMetadata(dn,t);return{compilerGeneratedMetadata:n,userGeneratedMetadata:r||{}}},e.prototype.getPropertiesMetadata=function(t){var n=Reflect.getMetadata(hn,t)||[];return n},e}(),ct={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};function gn(e){return e instanceof RangeError||e.message===xe}var ke=function(e,t){try{return e()}catch(n){throw gn(n)&&(n=t()),n}};function rt(e){if(typeof e=="function"){var t=e;return t.name}else{if(typeof e=="symbol")return e.toString();var t=e;return t}}function en(e,t,n){var r="",i=n(e,t);return i.length!==0&&(r=`
Registered bindings:`,i.forEach(function(a){var u="Object";a.implementationType!==null&&(u=wt(a.implementationType)),r=r+`
 `+u,a.constraint.metaData&&(r=r+" - "+a.constraint.metaData)})),r}function wn(e,t){return e.parentRequest===null?!1:e.parentRequest.serviceIdentifier===t?!0:wn(e.parentRequest,t)}function je(e){function t(r,i){i===void 0&&(i=[]);var a=rt(r.serviceIdentifier);return i.push(a),r.parentRequest!==null?t(r.parentRequest,i):i}var n=t(e);return n.reverse().join(" --> ")}function _n(e){e.childRequests.forEach(function(t){if(wn(t,t.serviceIdentifier)){var n=je(t);throw new Error(ge+" "+n)}else _n(t)})}function Be(e,t){if(t.isTagged()||t.isNamed()){var n="",r=t.getNamedTag(),i=t.getCustomTags();return r!==null&&(n+=r.toString()+`
`),i!==null&&i.forEach(function(a){n+=a.toString()+`
`})," "+e+`
 `+e+" - "+n}else return" "+e}function wt(e){if(e.name)return e.name;var t=e.toString(),n=t.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+t}function Fe(e){return e.toString().slice(7,-1)}var bn=function(){function e(t){this.id=ot(),this.container=t}return e.prototype.addPlan=function(t){this.plan=t},e.prototype.setCurrentRequest=function(t){this.currentRequest=t},e}(),z=function(){function e(t,n){this.key=t,this.value=n}return e.prototype.toString=function(){return this.key===G?"named: "+String(this.value).toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+String(this.value)+" }"},e}(),We=function(){function e(t,n){this.parentContext=t,this.rootRequest=n}return e}(),Ge=function(){function e(t){this._cb=t}return e.prototype.unwrap=function(){return this._cb()},e}(),Ve=function(){function e(t){this.str=t}return e.prototype.startsWith=function(t){return this.str.indexOf(t)===0},e.prototype.endsWith=function(t){var n="",r=t.split("").reverse().join("");return n=this.str.split("").reverse().join(""),this.startsWith.call({str:n},r)},e.prototype.contains=function(t){return this.str.indexOf(t)!==-1},e.prototype.equals=function(t){return this.str===t},e.prototype.value=function(){return this.str},e}(),_t=function(){function e(t,n,r,i){this.id=ot(),this.type=t,this.serviceIdentifier=r;var a=typeof n=="symbol"?Fe(n):n;this.name=new Ve(a||""),this.identifier=n,this.metadata=new Array;var u=null;typeof i=="string"?u=new z(G,i):i instanceof z&&(u=i),u!==null&&this.metadata.push(u)}return e.prototype.hasTag=function(t){for(var n=0,r=this.metadata;n<r.length;n++){var i=r[n];if(i.key===t)return!0}return!1},e.prototype.isArray=function(){return this.hasTag(et)},e.prototype.matchesArray=function(t){return this.matchesTag(et)(t)},e.prototype.isNamed=function(){return this.hasTag(G)},e.prototype.isTagged=function(){return this.metadata.some(function(t){return tn.every(function(n){return t.key!==n})})},e.prototype.isOptional=function(){return this.matchesTag(ln)(!0)},e.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(t){return t.key===G})[0]:null},e.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(t){return tn.every(function(n){return t.key!==n})}):null},e.prototype.matchesNamedTag=function(t){return this.matchesTag(G)(t)},e.prototype.matchesTag=function(t){var n=this;return function(r){for(var i=0,a=n.metadata;i<a.length;i++){var u=a[i];if(u.key===t&&u.value===r)return!0}return!1}},e}(),lt=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))};function Le(e,t){var n=wt(t);return mn(e,n,t,!1)}function mn(e,t,n,r){var i=e.getConstructorMetadata(n),a=i.compilerGeneratedMetadata;if(a===void 0){var u=pn+" "+t+".";throw new Error(u)}var l=i.userGeneratedMetadata,v=Object.keys(l),o=n.length===0&&v.length>0,d=v.length>n.length,b=o||d?v.length:n.length,T=He(r,t,a,l,b),x=An(e,n,t),k=lt(lt([],T,!0),x,!0);return k}function Ue(e,t,n,r,i){var a=i[e.toString()]||[],u=Tn(a),l=u.unmanaged!==!0,v=r[e],o=u.inject||u.multiInject;if(v=o||v,v instanceof Ge&&(v=v.unwrap()),l){var d=v===Object,b=v===Function,T=v===void 0,x=d||b||T;if(!t&&x){var k=pe+" argument "+e+" in class "+n+".";throw new Error(k)}var j=new _t(at.ConstructorArgument,u.targetName,v);return j.metadata=a,j}return null}function He(e,t,n,r,i){for(var a=[],u=0;u<i;u++){var l=u,v=Ue(l,e,t,n,r);v!==null&&a.push(v)}return a}function Ye(e,t,n,r){var i=e||t;if(i===void 0){var a=pn+" for property "+String(n)+" in class "+r+".";throw new Error(a)}return i}function An(e,t,n){for(var r=e.getPropertiesMetadata(t),i=[],a=Object.getOwnPropertySymbols(r),u=Object.keys(r),l=u.concat(a),v=0,o=l;v<o.length;v++){var d=o[v],b=r[d],T=Tn(b),x=T.targetName||d,k=Ye(T.inject,T.multiInject,d,n),j=new _t(at.ClassProperty,x,k);j.metadata=b,i.push(j)}var $=Object.getPrototypeOf(t.prototype).constructor;if($!==Object){var st=An(e,$,n);i=lt(lt([],i,!0),st,!0)}return i}function Sn(e,t){var n=Object.getPrototypeOf(t.prototype).constructor;if(n!==Object){var r=wt(n),i=mn(e,r,n,!0),a=i.map(function(v){return v.metadata.filter(function(o){return o.key===Nt})}),u=[].concat.apply([],a).length,l=i.length-u;return l>0?l:Sn(e,n)}else return 0}function Tn(e){var t={};return e.forEach(function(n){t[n.key.toString()]=n.value}),{inject:t[gt],multiInject:t[et],targetName:t[fn],unmanaged:t[Nt]}}var Pt=function(){function e(t,n,r,i,a){this.id=ot(),this.serviceIdentifier=t,this.parentContext=n,this.parentRequest=r,this.target=a,this.childRequests=[],this.bindings=Array.isArray(i)?i:[i],this.requestScope=r===null?new Map:null}return e.prototype.addChildRequest=function(t,n,r){var i=new e(t,this.parentContext,this,n,r);return this.childRequests.push(i),i},e}();function dt(e){return e._bindingDictionary}function $e(e,t,n,r,i,a){var u=e?et:gt,l=new z(u,n),v=new _t(t,r,n,l);if(i!==void 0){var o=new z(i,a);v.metadata.push(o)}return v}function rn(e,t,n,r,i){var a=it(n.container,i.serviceIdentifier),u=[];return a.length===ct.NoBindingsAvailable&&n.container.options.autoBindInjectable&&typeof i.serviceIdentifier=="function"&&e.getConstructorMetadata(i.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(i.serviceIdentifier).toSelf(),a=it(n.container,i.serviceIdentifier)),t?u=a:u=a.filter(function(l){var v=new Pt(l.serviceIdentifier,n,r,l,i);return l.constraint(v)}),Xe(i.serviceIdentifier,u,i,n.container),u}function Xe(e,t,n,r){switch(t.length){case ct.NoBindingsAvailable:if(n.isOptional())return t;var i=rt(e),a=ve;throw a+=Be(i,n),a+=en(r,i,it),new Error(a);case ct.OnlyOneBindingAvailable:return t;case ct.MultipleBindingsAvailable:default:if(n.isArray())return t;var i=rt(e),a=de+" "+i;throw a+=en(r,i,it),new Error(a)}}function In(e,t,n,r,i,a){var u,l;if(i===null){u=rn(e,t,r,null,a),l=new Pt(n,r,null,u,a);var v=new We(r,l);r.addPlan(v)}else u=rn(e,t,r,i,a),l=i.addChildRequest(a.serviceIdentifier,u,a);u.forEach(function(o){var d=null;if(a.isArray())d=l.addChildRequest(o.serviceIdentifier,o,a);else{if(o.cache)return;d=l}if(o.type===E.Instance&&o.implementationType!==null){var b=Le(e,o.implementationType);if(!r.container.options.skipBaseClassChecks){var T=Sn(e,o.implementationType);if(b.length<T){var x=Te(wt(o.implementationType));throw new Error(x)}}b.forEach(function(k){In(e,!1,k.serviceIdentifier,r,d,k)})}})}function it(e,t){var n=[],r=dt(e);return r.hasKey(t)?n=r.get(t):e.parent!==null&&(n=it(e.parent,t)),n}function ze(e,t,n,r,i,a,u,l){l===void 0&&(l=!1);var v=new bn(t),o=$e(n,r,i,"",a,u);try{return In(e,l,i,v,null,o),v}catch(d){throw gn(d)&&_n(v.plan.rootRequest),d}}function Je(e,t,n,r){var i=new _t(at.Variable,"",t,new z(n,r)),a=new bn(e),u=new Pt(t,a,null,[],i);return u}function R(e){var t=typeof e=="object"&&e!==null||typeof e=="function";return t&&typeof e.then=="function"}function En(e){return R(e)?!0:Array.isArray(e)&&e.some(R)}var Ke=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function l(d){try{o(r.next(d))}catch(b){u(b)}}function v(d){try{o(r.throw(d))}catch(b){u(b)}}function o(d){d.done?a(d.value):i(d.value).then(l,v)}o((r=r.apply(e,t||[])).next())})},qe=function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,u;return u={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(o){return function(d){return v([o,d])}}function v(o){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return n.label++,{value:o[1],done:!1};case 5:n.label++,i=o[1],o=[0];continue;case 7:o=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){n.label=o[1];break}if(o[0]===6&&n.label<a[1]){n.label=a[1],a=o;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(o);break}a[2]&&n.ops.pop(),n.trys.pop();continue}o=t.call(e,n)}catch(d){o=[6,d],i=0}finally{r=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},Qe=function(e,t){return t.scope===D.Singleton&&t.activated?t.cache:t.scope===D.Request&&e.has(t.id)?e.get(t.id):null},Ze=function(e,t,n){t.scope===D.Singleton&&nr(t,n),t.scope===D.Request&&tr(e,t,n)},tr=function(e,t,n){e.has(t.id)||e.set(t.id,n)},nr=function(e,t){e.cache=t,e.activated=!0,R(t)&&er(e,t)},er=function(e,t){return Ke(void 0,void 0,void 0,function(){var n,r;return qe(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t];case 1:return n=i.sent(),e.cache=n,[3,3];case 2:throw r=i.sent(),e.cache=null,e.activated=!1,r;case 3:return[2]}})})},nt;(function(e){e.DynamicValue="toDynamicValue",e.Factory="toFactory",e.Provider="toProvider"})(nt||(nt={}));var rr=function(e){var t=null;switch(e.type){case E.ConstantValue:case E.Function:t=e.cache;break;case E.Constructor:case E.Instance:t=e.implementationType;break;case E.DynamicValue:t=e.dynamicValue;break;case E.Provider:t=e.provider;break;case E.Factory:t=e.factory;break}if(t===null){var n=rt(e.serviceIdentifier);throw new Error(we+" "+n)}},ir=function(e){switch(e.type){case E.Factory:return{factory:e.factory,factoryType:nt.Factory};case E.Provider:return{factory:e.provider,factoryType:nt.Provider};case E.DynamicValue:return{factory:e.dynamicValue,factoryType:nt.DynamicValue};default:throw new Error("Unexpected factory type "+e.type)}},q=function(){return q=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},q.apply(this,arguments)},Cn=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function l(d){try{o(r.next(d))}catch(b){u(b)}}function v(d){try{o(r.throw(d))}catch(b){u(b)}}function o(d){d.done?a(d.value):i(d.value).then(l,v)}o((r=r.apply(e,t||[])).next())})},Mn=function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,u;return u={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(o){return function(d){return v([o,d])}}function v(o){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return n.label++,{value:o[1],done:!1};case 5:n.label++,i=o[1],o=[0];continue;case 7:o=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){n.label=o[1];break}if(o[0]===6&&n.label<a[1]){n.label=a[1],a=o;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(o);break}a[2]&&n.ops.pop(),n.trys.pop();continue}o=t.call(e,n)}catch(d){o=[6,d],i=0}finally{r=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},ar=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))};function or(e,t){return e.reduce(function(n,r){var i=t(r),a=r.target.type;return a===at.ConstructorArgument?n.constructorInjections.push(i):(n.propertyRequests.push(r),n.propertyInjections.push(i)),n.isAsync||(n.isAsync=En(i)),n},{constructorInjections:[],propertyInjections:[],propertyRequests:[],isAsync:!1})}function sr(e,t,n){var r;if(t.length>0){var i=or(t,n),a=q(q({},i),{constr:e});i.isAsync?r=ur(a):r=On(a)}else r=new e;return r}function On(e){var t,n=new((t=e.constr).bind.apply(t,ar([void 0],e.constructorInjections,!1)));return e.propertyRequests.forEach(function(r,i){var a=r.target.identifier,u=e.propertyInjections[i];(!r.target.isOptional()||u!==void 0)&&(n[a]=u)}),n}function ur(e){return Cn(this,void 0,void 0,function(){var t,n;return Mn(this,function(r){switch(r.label){case 0:return[4,an(e.constructorInjections)];case 1:return t=r.sent(),[4,an(e.propertyInjections)];case 2:return n=r.sent(),[2,On(q(q({},e),{constructorInjections:t,propertyInjections:n}))]}})})}function an(e){return Cn(this,void 0,void 0,function(){var t,n,r,i;return Mn(this,function(a){for(t=[],n=0,r=e;n<r.length;n++)i=r[n],Array.isArray(i)?t.push(Promise.all(i)):t.push(i);return[2,Promise.all(t)]})})}function on(e,t){var n=cr(e,t);return R(n)?n.then(function(){return t}):t}function cr(e,t){var n,r;if(Reflect.hasMetadata(Zt,e)){var i=Reflect.getMetadata(Zt,e);try{return(r=(n=t)[i.value])===null||r===void 0?void 0:r.call(n)}catch(a){if(a instanceof Error)throw new Error(De(e.name,a.message))}}}function fr(e,t){e.scope!==D.Singleton&&lr(e,t)}function lr(e,t){var n="Class cannot be instantiated in "+(e.scope===D.Request?"request":"transient")+" scope.";if(typeof e.onDeactivation=="function")throw new Error(Mt(t.name,n));if(Reflect.hasMetadata(Ct,t))throw new Error(Ne(t.name,n))}function dr(e,t,n,r){fr(e,t);var i=sr(t,n,r);return R(i)?i.then(function(a){return on(t,a)}):on(t,i)}var hr=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function l(d){try{o(r.next(d))}catch(b){u(b)}}function v(d){try{o(r.throw(d))}catch(b){u(b)}}function o(d){d.done?a(d.value):i(d.value).then(l,v)}o((r=r.apply(e,t||[])).next())})},vr=function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,u;return u={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(o){return function(d){return v([o,d])}}function v(o){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return n.label++,{value:o[1],done:!1};case 5:n.label++,i=o[1],o=[0];continue;case 7:o=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){n.label=o[1];break}if(o[0]===6&&n.label<a[1]){n.label=a[1],a=o;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(o);break}a[2]&&n.ops.pop(),n.trys.pop();continue}o=t.call(e,n)}catch(d){o=[6,d],i=0}finally{r=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},xt=function(e){return function(t){t.parentContext.setCurrentRequest(t);var n=t.bindings,r=t.childRequests,i=t.target&&t.target.isArray(),a=!t.parentRequest||!t.parentRequest.target||!t.target||!t.parentRequest.target.matchesArray(t.target.serviceIdentifier);if(i&&a)return r.map(function(l){var v=xt(e);return v(l)});if(t.target.isOptional()&&n.length===0)return;var u=n[0];return wr(e,t,u)}},pr=function(e,t){var n=ir(e);return ke(function(){return n.factory.bind(e)(t)},function(){return new Error(Pe(n.factoryType,t.currentRequest.serviceIdentifier.toString()))})},yr=function(e,t,n){var r,i=t.childRequests;switch(rr(n),n.type){case E.ConstantValue:case E.Function:r=n.cache;break;case E.Constructor:r=n.implementationType;break;case E.Instance:r=dr(n,n.implementationType,i,xt(e));break;default:r=pr(n,t.parentContext)}return r},gr=function(e,t,n){var r=Qe(e,t);return r!==null||(r=n(),Ze(e,t,r)),r},wr=function(e,t,n){return gr(e,n,function(){var r=yr(e,t,n);return R(r)?r=r.then(function(i){return sn(t,n,i)}):r=sn(t,n,r),r})};function sn(e,t,n){var r=_r(e.parentContext,t,n),i=Ar(e.parentContext.container),a,u=i.next();do{a=u.value;var l=e.parentContext,v=e.serviceIdentifier,o=mr(a,v);R(r)?r=Dn(o,l,r):r=br(o,l,r),u=i.next()}while(u.done!==!0&&!dt(a).hasKey(e.serviceIdentifier));return r}var _r=function(e,t,n){var r;return typeof t.onActivation=="function"?r=t.onActivation(e,n):r=n,r},br=function(e,t,n){for(var r=e.next();!r.done;){if(n=r.value(t,n),R(n))return Dn(e,t,n);r=e.next()}return n},Dn=function(e,t,n){return hr(void 0,void 0,void 0,function(){var r,i;return vr(this,function(a){switch(a.label){case 0:return[4,n];case 1:r=a.sent(),i=e.next(),a.label=2;case 2:return i.done?[3,4]:[4,i.value(t,r)];case 3:return r=a.sent(),i=e.next(),[3,2];case 4:return[2,r]}})})},mr=function(e,t){var n=e._activations;return n.hasKey(t)?n.get(t).values():[].values()},Ar=function(e){for(var t=[e],n=e.parent;n!==null;)t.push(n),n=n.parent;var r=function(){var a=t.pop();return a!==void 0?{done:!1,value:a}:{done:!0,value:void 0}},i={next:r};return i};function Sr(e){var t=xt(e.plan.rootRequest.requestScope);return t(e.plan.rootRequest)}var U=function(e,t){var n=e.parentRequest;return n!==null?t(n)?!0:U(n,t):!1},tt=function(e){return function(t){var n=function(r){return r!==null&&r.target!==null&&r.target.matchesTag(e)(t)};return n.metaData=new z(e,t),n}},ut=tt(G),It=function(e){return function(t){var n=null;if(t!==null)if(n=t.bindings[0],typeof e=="string"){var r=n.serviceIdentifier;return r===e}else{var i=t.bindings[0].implementationType;return e===i}return!1}},ht=function(){function e(t){this._binding=t}return e.prototype.when=function(t){return this._binding.constraint=t,new P(this._binding)},e.prototype.whenTargetNamed=function(t){return this._binding.constraint=ut(t),new P(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){if(t===null)return!1;var n=t.target!==null&&!t.target.isNamed()&&!t.target.isTagged();return n},new P(this._binding)},e.prototype.whenTargetTagged=function(t,n){return this._binding.constraint=tt(t)(n),new P(this._binding)},e.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(n){return n!==null&&It(t)(n.parentRequest)},new P(this._binding)},e.prototype.whenParentNamed=function(t){return this._binding.constraint=function(n){return n!==null&&ut(t)(n.parentRequest)},new P(this._binding)},e.prototype.whenParentTagged=function(t,n){return this._binding.constraint=function(r){return r!==null&&tt(t)(n)(r.parentRequest)},new P(this._binding)},e.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(n){return n!==null&&U(n,It(t))},new P(this._binding)},e.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(n){return n!==null&&!U(n,It(t))},new P(this._binding)},e.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(n){return n!==null&&U(n,ut(t))},new P(this._binding)},e.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(n){return n!==null&&!U(n,ut(t))},new P(this._binding)},e.prototype.whenAnyAncestorTagged=function(t,n){return this._binding.constraint=function(r){return r!==null&&U(r,tt(t)(n))},new P(this._binding)},e.prototype.whenNoAncestorTagged=function(t,n){return this._binding.constraint=function(r){return r!==null&&!U(r,tt(t)(n))},new P(this._binding)},e.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(n){return n!==null&&U(n,t)},new P(this._binding)},e.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(n){return n!==null&&!U(n,t)},new P(this._binding)},e}(),P=function(){function e(t){this._binding=t}return e.prototype.onActivation=function(t){return this._binding.onActivation=t,new ht(this._binding)},e.prototype.onDeactivation=function(t){return this._binding.onDeactivation=t,new ht(this._binding)},e}(),H=function(){function e(t){this._binding=t,this._bindingWhenSyntax=new ht(this._binding),this._bindingOnSyntax=new P(this._binding)}return e.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},e.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(t,n){return this._bindingWhenSyntax.whenTargetTagged(t,n)},e.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},e.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},e.prototype.whenParentTagged=function(t,n){return this._bindingWhenSyntax.whenParentTagged(t,n)},e.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},e.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},e.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},e.prototype.whenAnyAncestorTagged=function(t,n){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,n)},e.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},e.prototype.whenNoAncestorTagged=function(t,n){return this._bindingWhenSyntax.whenNoAncestorTagged(t,n)},e.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},e.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},e.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},e.prototype.onDeactivation=function(t){return this._bindingOnSyntax.onDeactivation(t)},e}(),Tr=function(){function e(t){this._binding=t}return e.prototype.inRequestScope=function(){return this._binding.scope=D.Request,new H(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=D.Singleton,new H(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=D.Transient,new H(this._binding)},e}(),un=function(){function e(t){this._binding=t,this._bindingWhenSyntax=new ht(this._binding),this._bindingOnSyntax=new P(this._binding),this._bindingInSyntax=new Tr(t)}return e.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},e.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},e.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},e.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},e.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(t,n){return this._bindingWhenSyntax.whenTargetTagged(t,n)},e.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},e.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},e.prototype.whenParentTagged=function(t,n){return this._bindingWhenSyntax.whenParentTagged(t,n)},e.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},e.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},e.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},e.prototype.whenAnyAncestorTagged=function(t,n){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,n)},e.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},e.prototype.whenNoAncestorTagged=function(t,n){return this._bindingWhenSyntax.whenNoAncestorTagged(t,n)},e.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},e.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},e.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},e.prototype.onDeactivation=function(t){return this._bindingOnSyntax.onDeactivation(t)},e}(),Ir=function(){function e(t){this._binding=t}return e.prototype.to=function(t){return this._binding.type=E.Instance,this._binding.implementationType=t,new un(this._binding)},e.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+Se);var t=this._binding.serviceIdentifier;return this.to(t)},e.prototype.toConstantValue=function(t){return this._binding.type=E.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=D.Singleton,new H(this._binding)},e.prototype.toDynamicValue=function(t){return this._binding.type=E.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new un(this._binding)},e.prototype.toConstructor=function(t){return this._binding.type=E.Constructor,this._binding.implementationType=t,this._binding.scope=D.Singleton,new H(this._binding)},e.prototype.toFactory=function(t){return this._binding.type=E.Factory,this._binding.factory=t,this._binding.scope=D.Singleton,new H(this._binding)},e.prototype.toFunction=function(t){if(typeof t!="function")throw new Error(me);var n=this.toConstantValue(t);return this._binding.type=E.Function,this._binding.scope=D.Singleton,n},e.prototype.toAutoFactory=function(t){return this._binding.type=E.Factory,this._binding.factory=function(n){var r=function(){return n.container.get(t)};return r},this._binding.scope=D.Singleton,new H(this._binding)},e.prototype.toAutoNamedFactory=function(t){return this._binding.type=E.Factory,this._binding.factory=function(n){return function(r){return n.container.getNamed(t,r)}},new H(this._binding)},e.prototype.toProvider=function(t){return this._binding.type=E.Provider,this._binding.provider=t,this._binding.scope=D.Singleton,new H(this._binding)},e.prototype.toService=function(t){this.toDynamicValue(function(n){return n.container.get(t)})},e}(),Er=function(){function e(){}return e.of=function(t,n,r,i,a){var u=new e;return u.bindings=t,u.middleware=n,u.deactivations=i,u.activations=r,u.moduleActivationStore=a,u},e}();function Cr(e){return typeof e=="object"&&e!==null&&"clone"in e&&typeof e.clone=="function"}var X=function(){function e(){this._map=new Map}return e.prototype.getMap=function(){return this._map},e.prototype.add=function(t,n){if(t==null)throw new Error(Z);if(n==null)throw new Error(Z);var r=this._map.get(t);r!==void 0?r.push(n):this._map.set(t,[n])},e.prototype.get=function(t){if(t==null)throw new Error(Z);var n=this._map.get(t);if(n!==void 0)return n;throw new Error(nn)},e.prototype.remove=function(t){if(t==null)throw new Error(Z);if(!this._map.delete(t))throw new Error(nn)},e.prototype.removeIntersection=function(t){var n=this;this.traverse(function(r,i){var a=t.hasKey(r)?t.get(r):void 0;if(a!==void 0){var u=i.filter(function(l){return!a.some(function(v){return l===v})});n._setValue(r,u)}})},e.prototype.removeByCondition=function(t){var n=this,r=[];return this._map.forEach(function(i,a){for(var u=[],l=0,v=i;l<v.length;l++){var o=v[l],d=t(o);d?r.push(o):u.push(o)}n._setValue(a,u)}),r},e.prototype.hasKey=function(t){if(t==null)throw new Error(Z);return this._map.has(t)},e.prototype.clone=function(){var t=new e;return this._map.forEach(function(n,r){n.forEach(function(i){return t.add(r,Cr(i)?i.clone():i)})}),t},e.prototype.traverse=function(t){this._map.forEach(function(n,r){t(r,n)})},e.prototype._setValue=function(t,n){n.length>0?this._map.set(t,n):this._map.delete(t)},e}(),Mr=function(){function e(){this._map=new Map}return e.prototype.remove=function(t){if(this._map.has(t)){var n=this._map.get(t);return this._map.delete(t),n}return this._getEmptyHandlersStore()},e.prototype.addDeactivation=function(t,n,r){this._getModuleActivationHandlers(t).onDeactivations.add(n,r)},e.prototype.addActivation=function(t,n,r){this._getModuleActivationHandlers(t).onActivations.add(n,r)},e.prototype.clone=function(){var t=new e;return this._map.forEach(function(n,r){t._map.set(r,{onActivations:n.onActivations.clone(),onDeactivations:n.onDeactivations.clone()})}),t},e.prototype._getModuleActivationHandlers=function(t){var n=this._map.get(t);return n===void 0&&(n=this._getEmptyHandlersStore(),this._map.set(t,n)),n},e.prototype._getEmptyHandlersStore=function(){var t={onActivations:new X,onDeactivations:new X};return t},e}(),vt=function(){return vt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},vt.apply(this,arguments)},F=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function l(d){try{o(r.next(d))}catch(b){u(b)}}function v(d){try{o(r.throw(d))}catch(b){u(b)}}function o(d){d.done?a(d.value):i(d.value).then(l,v)}o((r=r.apply(e,t||[])).next())})},W=function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,u;return u={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(o){return function(d){return v([o,d])}}function v(o){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return n.label++,{value:o[1],done:!1};case 5:n.label++,i=o[1],o=[0];continue;case 7:o=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){n.label=o[1];break}if(o[0]===6&&n.label<a[1]){n.label=a[1],a=o;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(o);break}a[2]&&n.ops.pop(),n.trys.pop();continue}o=t.call(e,n)}catch(d){o=[6,d],i=0}finally{r=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},Or=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},Dr=function(){function e(t){var n=t||{};if(typeof n!="object")throw new Error(""+Ie);if(n.defaultScope===void 0)n.defaultScope=D.Transient;else if(n.defaultScope!==D.Singleton&&n.defaultScope!==D.Transient&&n.defaultScope!==D.Request)throw new Error(""+Ee);if(n.autoBindInjectable===void 0)n.autoBindInjectable=!1;else if(typeof n.autoBindInjectable!="boolean")throw new Error(""+Ce);if(n.skipBaseClassChecks===void 0)n.skipBaseClassChecks=!1;else if(typeof n.skipBaseClassChecks!="boolean")throw new Error(""+Me);this.options={autoBindInjectable:n.autoBindInjectable,defaultScope:n.defaultScope,skipBaseClassChecks:n.skipBaseClassChecks},this.id=ot(),this._bindingDictionary=new X,this._snapshots=[],this._middleware=null,this._activations=new X,this._deactivations=new X,this.parent=null,this._metadataReader=new Re,this._moduleActivationStore=new Mr}return e.merge=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var a=new e,u=Or([t,n],r,!0).map(function(o){return dt(o)}),l=dt(a);function v(o,d){o.traverse(function(b,T){T.forEach(function(x){d.add(x.serviceIdentifier,x.clone())})})}return u.forEach(function(o){v(o,l)}),a},e.prototype.load=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=this._getContainerModuleHelpersFactory(),i=0,a=t;i<a.length;i++){var u=a[i],l=r(u.id);u.registry(l.bindFunction,l.unbindFunction,l.isboundFunction,l.rebindFunction,l.unbindAsyncFunction,l.onActivationFunction,l.onDeactivationFunction)}},e.prototype.loadAsync=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return F(this,void 0,void 0,function(){var r,i,a,u,l;return W(this,function(v){switch(v.label){case 0:r=this._getContainerModuleHelpersFactory(),i=0,a=t,v.label=1;case 1:return i<a.length?(u=a[i],l=r(u.id),[4,u.registry(l.bindFunction,l.unbindFunction,l.isboundFunction,l.rebindFunction,l.unbindAsyncFunction,l.onActivationFunction,l.onDeactivationFunction)]):[3,4];case 2:v.sent(),v.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.unload=function(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];n.forEach(function(i){var a=t._removeModuleBindings(i.id);t._deactivateSingletons(a),t._removeModuleHandlers(i.id)})},e.prototype.unloadAsync=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return F(this,void 0,void 0,function(){var r,i,a,u;return W(this,function(l){switch(l.label){case 0:r=0,i=t,l.label=1;case 1:return r<i.length?(a=i[r],u=this._removeModuleBindings(a.id),[4,this._deactivateSingletonsAsync(u)]):[3,4];case 2:l.sent(),this._removeModuleHandlers(a.id),l.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},e.prototype.bind=function(t){var n=this.options.defaultScope||D.Transient,r=new fe(t,n);return this._bindingDictionary.add(t,r),new Ir(r)},e.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},e.prototype.rebindAsync=function(t){return F(this,void 0,void 0,function(){return W(this,function(n){switch(n.label){case 0:return[4,this.unbindAsync(t)];case 1:return n.sent(),[2,this.bind(t)]}})})},e.prototype.unbind=function(t){if(this._bindingDictionary.hasKey(t)){var n=this._bindingDictionary.get(t);this._deactivateSingletons(n)}this._removeServiceFromDictionary(t)},e.prototype.unbindAsync=function(t){return F(this,void 0,void 0,function(){var n;return W(this,function(r){switch(r.label){case 0:return this._bindingDictionary.hasKey(t)?(n=this._bindingDictionary.get(t),[4,this._deactivateSingletonsAsync(n)]):[3,2];case 1:r.sent(),r.label=2;case 2:return this._removeServiceFromDictionary(t),[2]}})})},e.prototype.unbindAll=function(){var t=this;this._bindingDictionary.traverse(function(n,r){t._deactivateSingletons(r)}),this._bindingDictionary=new X},e.prototype.unbindAllAsync=function(){return F(this,void 0,void 0,function(){var t,n=this;return W(this,function(r){switch(r.label){case 0:return t=[],this._bindingDictionary.traverse(function(i,a){t.push(n._deactivateSingletonsAsync(a))}),[4,Promise.all(t)];case 1:return r.sent(),this._bindingDictionary=new X,[2]}})})},e.prototype.onActivation=function(t,n){this._activations.add(t,n)},e.prototype.onDeactivation=function(t,n){this._deactivations.add(t,n)},e.prototype.isBound=function(t){var n=this._bindingDictionary.hasKey(t);return!n&&this.parent&&(n=this.parent.isBound(t)),n},e.prototype.isCurrentBound=function(t){return this._bindingDictionary.hasKey(t)},e.prototype.isBoundNamed=function(t,n){return this.isBoundTagged(t,G,n)},e.prototype.isBoundTagged=function(t,n,r){var i=!1;if(this._bindingDictionary.hasKey(t)){var a=this._bindingDictionary.get(t),u=Je(this,t,n,r);i=a.some(function(l){return l.constraint(u)})}return!i&&this.parent&&(i=this.parent.isBoundTagged(t,n,r)),i},e.prototype.snapshot=function(){this._snapshots.push(Er.of(this._bindingDictionary.clone(),this._middleware,this._activations.clone(),this._deactivations.clone(),this._moduleActivationStore.clone()))},e.prototype.restore=function(){var t=this._snapshots.pop();if(t===void 0)throw new Error(_e);this._bindingDictionary=t.bindings,this._activations=t.activations,this._deactivations=t.deactivations,this._middleware=t.middleware,this._moduleActivationStore=t.moduleActivationStore},e.prototype.createChild=function(t){var n=new e(t||this.options);return n.parent=this,n},e.prototype.applyMiddleware=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce(function(i,a){return a(i)},r)},e.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},e.prototype.get=function(t){var n=this._getNotAllArgs(t,!1);return this._getButThrowIfAsync(n)},e.prototype.getAsync=function(t){return F(this,void 0,void 0,function(){var n;return W(this,function(r){return n=this._getNotAllArgs(t,!1),[2,this._get(n)]})})},e.prototype.getTagged=function(t,n,r){var i=this._getNotAllArgs(t,!1,n,r);return this._getButThrowIfAsync(i)},e.prototype.getTaggedAsync=function(t,n,r){return F(this,void 0,void 0,function(){var i;return W(this,function(a){return i=this._getNotAllArgs(t,!1,n,r),[2,this._get(i)]})})},e.prototype.getNamed=function(t,n){return this.getTagged(t,G,n)},e.prototype.getNamedAsync=function(t,n){return this.getTaggedAsync(t,G,n)},e.prototype.getAll=function(t){var n=this._getAllArgs(t);return this._getButThrowIfAsync(n)},e.prototype.getAllAsync=function(t){var n=this._getAllArgs(t);return this._getAll(n)},e.prototype.getAllTagged=function(t,n,r){var i=this._getNotAllArgs(t,!0,n,r);return this._getButThrowIfAsync(i)},e.prototype.getAllTaggedAsync=function(t,n,r){var i=this._getNotAllArgs(t,!0,n,r);return this._getAll(i)},e.prototype.getAllNamed=function(t,n){return this.getAllTagged(t,G,n)},e.prototype.getAllNamedAsync=function(t,n){return this.getAllTaggedAsync(t,G,n)},e.prototype.resolve=function(t){var n=this.isBound(t);n||this.bind(t).toSelf();var r=this.get(t);return n||this.unbind(t),r},e.prototype._preDestroy=function(t,n){var r,i;if(Reflect.hasMetadata(Ct,t)){var a=Reflect.getMetadata(Ct,t);return(i=(r=n)[a.value])===null||i===void 0?void 0:i.call(r)}},e.prototype._removeModuleHandlers=function(t){var n=this._moduleActivationStore.remove(t);this._activations.removeIntersection(n.onActivations),this._deactivations.removeIntersection(n.onDeactivations)},e.prototype._removeModuleBindings=function(t){return this._bindingDictionary.removeByCondition(function(n){return n.moduleId===t})},e.prototype._deactivate=function(t,n){var r=this,i=Object.getPrototypeOf(n).constructor;try{if(this._deactivations.hasKey(t.serviceIdentifier)){var a=this._deactivateContainer(n,this._deactivations.get(t.serviceIdentifier).values());if(R(a))return this._handleDeactivationError(a.then(function(){return r._propagateContainerDeactivationThenBindingAndPreDestroyAsync(t,n,i)}),i)}var u=this._propagateContainerDeactivationThenBindingAndPreDestroy(t,n,i);if(R(u))return this._handleDeactivationError(u,i)}catch(l){if(l instanceof Error)throw new Error(Mt(i.name,l.message))}},e.prototype._handleDeactivationError=function(t,n){return F(this,void 0,void 0,function(){var r;return W(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t];case 1:return i.sent(),[3,3];case 2:if(r=i.sent(),r instanceof Error)throw new Error(Mt(n.name,r.message));return[3,3];case 3:return[2]}})})},e.prototype._deactivateContainer=function(t,n){for(var r=this,i=n.next();i.value;){var a=i.value(t);if(R(a))return a.then(function(){return r._deactivateContainerAsync(t,n)});i=n.next()}},e.prototype._deactivateContainerAsync=function(t,n){return F(this,void 0,void 0,function(){var r;return W(this,function(i){switch(i.label){case 0:r=n.next(),i.label=1;case 1:return r.value?[4,r.value(t)]:[3,3];case 2:return i.sent(),r=n.next(),[3,1];case 3:return[2]}})})},e.prototype._getContainerModuleHelpersFactory=function(){var t=this,n=function(d,b){d._binding.moduleId=b},r=function(d){return function(b){var T=t.bind(b);return n(T,d),T}},i=function(){return function(d){return t.unbind(d)}},a=function(){return function(d){return t.unbindAsync(d)}},u=function(){return function(d){return t.isBound(d)}},l=function(d){return function(b){var T=t.rebind(b);return n(T,d),T}},v=function(d){return function(b,T){t._moduleActivationStore.addActivation(d,b,T),t.onActivation(b,T)}},o=function(d){return function(b,T){t._moduleActivationStore.addDeactivation(d,b,T),t.onDeactivation(b,T)}};return function(d){return{bindFunction:r(d),isboundFunction:u(),onActivationFunction:v(d),onDeactivationFunction:o(d),rebindFunction:l(d),unbindFunction:i(),unbindAsyncFunction:a()}}},e.prototype._getAll=function(t){return Promise.all(this._get(t))},e.prototype._get=function(t){var n=vt(vt({},t),{contextInterceptor:function(i){return i},targetType:at.Variable});if(this._middleware){var r=this._middleware(n);if(r==null)throw new Error(be);return r}return this._planAndResolve()(n)},e.prototype._getButThrowIfAsync=function(t){var n=this._get(t);if(En(n))throw new Error(Ae(t.serviceIdentifier));return n},e.prototype._getAllArgs=function(t){var n={avoidConstraints:!0,isMultiInject:!0,serviceIdentifier:t};return n},e.prototype._getNotAllArgs=function(t,n,r,i){var a={avoidConstraints:!1,isMultiInject:n,serviceIdentifier:t,key:r,value:i};return a},e.prototype._planAndResolve=function(){var t=this;return function(n){var r=ze(t._metadataReader,t,n.isMultiInject,n.targetType,n.serviceIdentifier,n.key,n.value,n.avoidConstraints);r=n.contextInterceptor(r);var i=Sr(r);return i}},e.prototype._deactivateIfSingleton=function(t){var n=this;if(t.activated)return R(t.cache)?t.cache.then(function(r){return n._deactivate(t,r)}):this._deactivate(t,t.cache)},e.prototype._deactivateSingletons=function(t){for(var n=0,r=t;n<r.length;n++){var i=r[n],a=this._deactivateIfSingleton(i);if(R(a))throw new Error(Oe)}},e.prototype._deactivateSingletonsAsync=function(t){return F(this,void 0,void 0,function(){var n=this;return W(this,function(r){switch(r.label){case 0:return[4,Promise.all(t.map(function(i){return n._deactivateIfSingleton(i)}))];case 1:return r.sent(),[2]}})})},e.prototype._propagateContainerDeactivationThenBindingAndPreDestroy=function(t,n,r){return this.parent?this._deactivate.bind(this.parent)(t,n):this._bindingDeactivationAndPreDestroy(t,n,r)},e.prototype._propagateContainerDeactivationThenBindingAndPreDestroyAsync=function(t,n,r){return F(this,void 0,void 0,function(){return W(this,function(i){switch(i.label){case 0:return this.parent?[4,this._deactivate.bind(this.parent)(t,n)]:[3,2];case 1:return i.sent(),[3,4];case 2:return[4,this._bindingDeactivationAndPreDestroyAsync(t,n,r)];case 3:i.sent(),i.label=4;case 4:return[2]}})})},e.prototype._removeServiceFromDictionary=function(t){try{this._bindingDictionary.remove(t)}catch{throw new Error(he+" "+rt(t))}},e.prototype._bindingDeactivationAndPreDestroy=function(t,n,r){var i=this;if(typeof t.onDeactivation=="function"){var a=t.onDeactivation(n);if(R(a))return a.then(function(){return i._preDestroy(r,n)})}return this._preDestroy(r,n)},e.prototype._bindingDeactivationAndPreDestroyAsync=function(t,n,r){return F(this,void 0,void 0,function(){return W(this,function(i){switch(i.label){case 0:return typeof t.onDeactivation!="function"?[3,2]:[4,t.onDeactivation(n)];case 1:i.sent(),i.label=2;case 2:return[4,this._preDestroy(r,n)];case 3:return i.sent(),[2]}})})},e}();function Nr(e){for(var t=new Set,n=0,r=e;n<r.length;n++){var i=r[n];if(t.has(i))return i;t.add(i)}}function Pr(e){return e.prototype!==void 0}function xr(e){if(e!==void 0)throw new Error(yn)}function Rr(e,t,n,r){xr(t),Nn(dn,e,n.toString(),r)}function kr(e,t,n){if(Pr(e))throw new Error(yn);Nn(hn,e.constructor,t,n)}function jr(e){var t=[];if(Array.isArray(e)){t=e;var n=Nr(t.map(function(r){return r.key}));if(n!==void 0)throw new Error(vn+" "+n.toString())}else t=[e];return t}function Nn(e,t,n,r){var i=jr(r),a={};Reflect.hasOwnMetadata(e,t)&&(a=Reflect.getMetadata(e,t));var u=a[n];if(u===void 0)u=[];else for(var l=function(b){if(i.some(function(T){return T.key===b.key}))throw new Error(vn+" "+b.key.toString())},v=0,o=u;v<o.length;v++){var d=o[v];l(d)}u.push.apply(u,i),a[n]=u,Reflect.defineMetadata(e,a,t)}function Br(e){return function(t,n,r){typeof r=="number"?Rr(t,n,r,e):kr(t,n,e)}}function Rt(){return function(e){if(Reflect.hasOwnMetadata(Et,e))throw new Error(le);var t=Reflect.getMetadata(se,e)||[];return Reflect.defineMetadata(Et,t,e),e}}function Fr(e){return function(t){return function(n,r,i){if(t===void 0){var a=typeof n=="function"?n.name:n.constructor.name;throw new Error(ye(a))}return Br(new z(e,t))(n,r,i)}}}var pt=Fr(gt);const Y={Draw:Symbol("Draw"),Canvas:Symbol("Canvas"),WindowEvent:Symbol("WindowEvent")},Wr=50;var Gr=Object.defineProperty,Vr=Object.getOwnPropertyDescriptor,Pn=(e,t,n,r)=>{for(var i=r>1?void 0:r?Vr(t,n):t,a=e.length-1,u;a>=0;a--)(u=e[a])&&(i=(r?u(t,n,i):u(i))||i);return r&&i&&Gr(t,n,i),i},Lr=(e,t)=>(n,r)=>t(n,r,e);let yt=class{constructor(e){B(this,"canvasService");this.canvasService=e}draw(e,t){setTimeout(()=>{this.canvasService.context.clearRect(0,0,this.canvasService.width,this.canvasService.height);const n=e.map(i=>this.canvasService.getOtherPointPosition(i,t));n.push(this.canvasService.getCanvasCenterPoint()),n.forEach(({x:i,y:a})=>{this.drawCircle(i,a)});const r=[];for(let i=0;i<n.length;i++)for(let a=i+1;a<n.length;a++)r.push([n[i],n[a]]);r.forEach(i=>{this.drawLine(i)})})}drawCircle(e,t){this.canvasService.context.beginPath(),this.canvasService.context.arc(e,t,Wr,0,2*Math.PI,!1),this.canvasService.context.fillStyle="green",this.canvasService.context.fill(),this.canvasService.context.lineWidth=5,this.canvasService.context.strokeStyle="#003300",this.canvasService.context.stroke()}drawLine(e){this.canvasService.context.beginPath(),this.canvasService.context.moveTo(e[0].x,e[0].y),this.canvasService.context.lineTo(e[1].x,e[1].y),this.canvasService.context.stroke()}};Pn([pt(Y.Canvas)],yt.prototype,"canvasService",2);yt=Pn([Rt(),Lr(0,pt(Y.Canvas))],yt);var Ur=Object.defineProperty,Hr=Object.getOwnPropertyDescriptor,Yr=(e,t,n,r)=>{for(var i=r>1?void 0:r?Hr(t,n):t,a=e.length-1,u;a>=0;a--)(u=e[a])&&(i=(r?u(t,n,i):u(i))||i);return r&&i&&Ur(t,n,i),i};let Ot=class{constructor(){B(this,"_context");B(this,"_canvas");this._canvas=document.createElement("canvas"),this.updateCanvasSize(),document.getElementById("my-app").append(this._canvas),this._context=this._canvas.getContext("2d")}get context(){return this._context}get width(){return this._canvas.width}get height(){return this._canvas.height}getCanvasCenterPoint(){const e=this.width/2,t=this.height/2;return{x:e,y:t}}getOtherPointPosition(e,t){const{globalXPosition:n,globalYPosition:r}=e,i=n-t.globalXPosition+window.innerWidth/2,a=r-t.globalYPosition+window.innerHeight/2;return{x:i,y:a}}updateCanvasSize(){this._canvas.width=window.innerWidth,this._canvas.height=window.innerHeight}};Ot=Yr([Rt()],Ot);var ft=(e=>(e.SYNC="sync",e.DATA="data",e))(ft||{}),$r=Object.defineProperty,Xr=Object.getOwnPropertyDescriptor,zr=(e,t,n,r)=>{for(var i=r>1?void 0:r?Xr(t,n):t,a=e.length-1,u;a>=0;a--)(u=e[a])&&(i=(r?u(t,n,i):u(i))||i);return r&&i&&$r(t,n,i),i},cn=(e,t)=>(n,r)=>t(n,r,e);let Dt=class{constructor(e,t){B(this,"worker",new SharedWorker(new URL("/assets/shared-Dpx-rRGi.js",import.meta.url)));B(this,"browserMoveEvent",new CustomEvent("browserMove",{detail:"browserPosition"}));B(this,"drawService");B(this,"canvasService");B(this,"windowId",(+new Date).toString());B(this,"prevWindowState",{});B(this,"globalPoint",{globalXPosition:window.innerWidth/2+window.screenX,globalYPosition:window.innerHeight/2+window.screenY});B(this,"lastData",[]);this.drawService=e,this.canvasService=t,window.addEventListener("resize",()=>{this.canvasService.updateCanvasSize(),this.globalPoint={globalXPosition:window.innerWidth/2+window.screenX,globalYPosition:window.innerHeight/2+window.screenY}},!1),window.addEventListener("browserMove",()=>{this.sendMessage(this.globalPoint),this.drawService.draw(this.lastData,this.globalPoint)}),setInterval(this.detectBrowserMove.bind(this),100),this.drawService.draw(this.lastData,this.globalPoint),this.worker.port.onmessage=n=>{n.data===ft.SYNC?this.worker.port.postMessage({id:this.windowId,type:ft.SYNC}):(this.lastData=n.data.filter(({id:r})=>r!==this.windowId).map(({point:r})=>r),this.drawService.draw(this.lastData,this.globalPoint))}}detectBrowserMove(){this.globalPoint={globalXPosition:window.innerWidth/2+window.screenX,globalYPosition:window.innerHeight/2+window.screenY},(window.screenX!==this.prevWindowState.screenX||window.screenY!==this.prevWindowState.screenY||window.innerHeight!==this.prevWindowState.innerHeight||window.innerWidth!==this.prevWindowState.innerWidth)&&(this.prevWindowState={screenX:window.screenX,screenY:window.screenY,innerWidth:window.innerWidth,innerHeight:window.innerHeight},window.dispatchEvent(this.browserMoveEvent))}sendMessage(e){this.worker.port.postMessage({id:this.windowId,type:ft.DATA,point:e})}};Dt=zr([Rt(),cn(0,pt(Y.Draw)),cn(1,pt(Y.Canvas))],Dt);const bt=new Dr;bt.bind(Y.Draw).to(yt).inSingletonScope();bt.bind(Y.Canvas).to(Ot).inSingletonScope();bt.bind(Y.WindowEvent).to(Dt);bt.get(Y.WindowEvent);
